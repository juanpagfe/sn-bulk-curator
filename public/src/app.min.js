"use strict";angular.module("snBulkCurator",["ui.router","ui.bootstrap","oc.lazyLoad","ngSanitize","infinite-scroll"]),angular.module("snBulkCurator").config(["$stateProvider","$urlRouterProvider","$ocLazyLoadProvider",function(t,e,r){r.config({debug:!1,events:!0}),e.otherwise("/twitter"),t.state("twitter",{url:"/twitter",templateUrl:"src/pages/twitter/twitter.html",controller:"TwitterCtrl"})}]),angular.module("snBulkCurator").filter("groupBy",function(){return function(t,e){var r=[],n=null,a=!1,u=e+"_CHANGED";return angular.forEach(t,function(t){a=!1,null!==n?n[e]!==t[e]&&(a=!0):a=!0,a?t[u]=!0:t[u]=!1,r.push(t),n=t}),r}}),angular.module("snBulkCurator").filter("groupCtxDate",function(){var t=function(t){var e=new Date(t);return e.getFullYear()+"-"+e.getMonth()};return function(e,r){var n=[],a=null,u=!1,o=r+"_CHANGED";return angular.forEach(e,function(e){if(u=!1,null!==a){var l=t(a[r]),i=t(e[r]);l!==i&&(u=!0)}else u=!0;u?e[o]=!0:e[o]=!1,n.push(e),a=e}),n}}),angular.module("snBulkCurator").controller("TwitterCtrl",["$scope","$http","$window",function(t,e,r){const n="https://twitter.com";var a=!1;t.dateFormat="YYYY.MM.dd",t.tweets=[],t.busy=!1;var u=function(t){var e='<a href="'+n+'/$1" target="_blank" class="tw-user">@$1</a>';return t=t.replace(/@([A-Za-z0-9_]+)/,e)},o=function(t){var e=/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)/gi,r='<a href="$1" target="_blank" class="tw-user">$1</a>';return t=t.replace(e,r)};t.parseDate=function(t){return new Date(t)};var l=function(){t.tweets=t.tweets.filter(function(t){return!t["delete"]})};t.loadTweets=function(){t.busy||(t.busy=!0,e.get("/api/tweets"+(a?"?max_id="+a:"")).then(function(e){200==e.status&&(t.tweets=t.tweets.concat(e.data),a=Math.min.apply(Math,t.tweets.map(function(t){return t.id}))),t.busy=!1}))},t.loadTweets(),t.deleteTweets=function(){var r=t.tweets.filter(function(t){return t["delete"]});r.length&&e["delete"]("/api/tweets?tweets="+r.join()).then(function(t){200==t.status&&(alert("Done deleting"),l())})},t.gotoTweet=function(t,e,a){r.open(n+"/"+e+"/status/"+a)},t.parseTweet=function(t){return t=o(t),t=u(t)},t.gtDate=function(t,e,r){return t=new Date(t),e=new Date(e),t.setHours(0,0,0,0),e.setHours(0,0,0,0),t>=e},t.getYear=function(t){return new Date(t).getYear()},t.getYMDate=function(t){var e=new Date(t);return e.toLocaleDateString("en-US",{year:"numeric",month:"long"})},t.ltDate=function(t,e){return t=new Date(t),e=new Date(e),t.setHours(0,0,0,0),e.setHours(0,0,0,0),t<=e}}]),angular.module("snBulkCurator").directive("header",function(){return{templateUrl:"src/layout/directives/header/header.html",restrict:"E",replace:!0}});