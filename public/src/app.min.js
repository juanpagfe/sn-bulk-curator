"use strict";angular.module("snBulkCurator",["ui.router","ui.bootstrap","oc.lazyLoad","ngSanitize","infinite-scroll"]),angular.module("snBulkCurator").config(["$stateProvider","$urlRouterProvider","$ocLazyLoadProvider",function(t,e,n){n.config({debug:!1,events:!0}),e.otherwise("/twitter"),t.state("twitter",{url:"/twitter",templateUrl:"src/pages/twitter/twitter.html",controller:"TwitterCtrl"}),t.state("facebook",{url:"/facebook",templateUrl:"src/pages/facebook/facebook.html",controller:"FacebookCtrl"})}]),angular.module("snBulkCurator").controller("FacebookCtrl",["$scope","$http","$window",function(t,e,n){const r="https://twitter.com";var a=!1;t.dateFormat="YYYY.MM.dd",t.posts=[],t.busy=!1,t.nomore=!1;var o=function(t){var e=/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)/gi,n='<a href="$1" target="_blank" class="tw-user">$1</a>';return t=t.replace(e,n)};t.parseDate=function(t){return new Date(t)};var u=function(){t.posts=t.posts.filter(function(t){return!t["delete"]})};t.loadPosts=function(){t.busy||(t.busy=!0,e.get("/api/facebook"+(a?"?max_id="+a:"")).then(function(e){200==e.status&&(t.posts=t.posts.concat(e.data.data),e.data.data.length<24&&(t.nomore=!0),a=Math.min.apply(Math,t.posts.map(function(t){return t.id}))),t.busy=!1}))},t.loadPosts(),t.deletePosts=function(){var n=t.posts.filter(function(t){return t["delete"]}).map(function(t){return t.id});n.length&&e["delete"]("/api/facebook?posts="+n.join()).then(function(t){200==t.status&&(alert("Done deleting"),u())})},t.gotoPost=function(t,e,a){n.open(r+"/"+e+"/status/"+a)},t.parsePost=function(t){return t=o(t)},t.gtDate=function(t,e,n){return t=new Date(t),e=new Date(e),t.setHours(0,0,0,0),e.setHours(0,0,0,0),t>=e},t.getYear=function(t){return new Date(t).getYear()},t.getYMDate=function(t){var e=new Date(t);return e.toLocaleDateString("en-US",{year:"numeric",month:"long"})},t.ltDate=function(t,e){return t=new Date(t),e=new Date(e),t.setHours(0,0,0,0),e.setHours(0,0,0,0),t<=e}}]),angular.module("snBulkCurator").controller("TwitterCtrl",["$scope","$http","$window",function(t,e,n){const r="https://twitter.com";var a=!1;t.dateFormat="YYYY.MM.dd",t.tweets=[],t.busy=!1;var o=function(t){var e='<a href="'+r+'/$1" target="_blank" class="tw-user">@$1</a>';return t=t.replace(/@([A-Za-z0-9_]+)/,e)},u=function(t){var e=/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)/gi,n='<a href="$1" target="_blank" class="tw-user">$1</a>';return t=t.replace(e,n)};t.parseDate=function(t){return new Date(t)};var s=function(){t.tweets=t.tweets.filter(function(t){return!t["delete"]})};t.loadTweets=function(){t.busy||(t.busy=!0,e.get("/api/tweets"+(a?"?max_id="+a:"")).then(function(e){200==e.status&&(t.tweets=t.tweets.concat(e.data),a=Math.min.apply(Math,t.tweets.map(function(t){return t.id}))),t.busy=!1}))},t.loadTweets(),t.deleteTweets=function(){var n=t.tweets.filter(function(t){return t["delete"]}).map(function(t){return t.id_str});n.length&&e["delete"]("/api/tweets?tweets="+n.join()).then(function(t){200==t.status&&(alert("Done deleting"),s())})},t.gotoTweet=function(t,e,a){n.open(r+"/"+e+"/status/"+a)},t.parseTweet=function(t){return t=u(t),t=o(t)},t.gtDate=function(t,e,n){return t=new Date(t),e=new Date(e),t.setHours(0,0,0,0),e.setHours(0,0,0,0),t>=e},t.getYear=function(t){return new Date(t).getYear()},t.getYMDate=function(t){var e=new Date(t);return e.toLocaleDateString("en-US",{year:"numeric",month:"long"})},t.ltDate=function(t,e){return t=new Date(t),e=new Date(e),t.setHours(0,0,0,0),e.setHours(0,0,0,0),t<=e}}]),angular.module("snBulkCurator").filter("groupBy",function(){return function(t,e){var n=[],r=null,a=!1,o=e+"_CHANGED";return angular.forEach(t,function(t){a=!1,null!==r?r[e]!==t[e]&&(a=!0):a=!0,a?t[o]=!0:t[o]=!1,n.push(t),r=t}),n}}),angular.module("snBulkCurator").filter("groupCtxDate",function(){var t=function(t){var e=new Date(t);return e.getFullYear()+"-"+e.getMonth()};return function(e,n){var r=[],a=null,o=!1,u=n+"_CHANGED";return angular.forEach(e,function(e){if(o=!1,null!==a){var s=t(a[n]),i=t(e[n]);s!==i&&(o=!0)}else o=!0;o?e[u]=!0:e[u]=!1,r.push(e),a=e}),r}}),angular.module("snBulkCurator").directive("header",function(){return{templateUrl:"src/layout/directives/header/header.html",restrict:"E",replace:!0}});